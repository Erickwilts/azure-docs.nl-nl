---
title: 'Azure AD Connect: groepen migreren van het ene forest naar het andere | Microsoft Documenten'
description: In dit artikel worden de stappen beschreven die nodig zijn om groepen van het ene forest naar het andere te migreren voor Azure AD Connect.
services: active-directory
author: billmath
manager: daveba
ms.service: active-directory
ms.topic: reference
ms.workload: identity
ms.date: 04/02/2020
ms.subservice: hybrid
ms.author: billmath
ms.collection: M365-identity-device-management
ms.openlocfilehash: 602c60de392afbff18bc141605a936636e48dbfe
ms.sourcegitcommit: ffc6e4f37233a82fcb14deca0c47f67a7d79ce5c
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 04/21/2020
ms.locfileid: "81729690"
---
# <a name="migrate-groups-from-one-forest-to-another-for-azure-ad-connect"></a>Groepen migreren van het ene forest naar het andere voor Azure AD Connect

In dit artikel worden de stappen beschreven die nodig zijn om groepen van het ene forest naar het andere te migreren, zodat de gemigreerde groepsobjecten overeenkomen met de bestaande objecten in de cloud.

## <a name="prerequisites"></a>Vereisten

- Azure AD Connect-versie 1.5.18.0 of hoger
- Kenmerk Bronanker is`mS-DS-ConsistencyGuid`

Vanaf versie 1.5.18.0 is Azure AD Connect begonnen `mS-DS-ConsistencyGuid` met het ondersteunen van het gebruik van groepen. Als `mS-DS-ConsistencyGuid` het kenmerk bronanker wordt gekozen en de waarde wordt ingevuld in `mS-DS-ConsistencyGuid` AD, gebruikt Azure AD Connect de waarde van de onveranderlijke id. Anders valt het terug `objectGUID`naar het gebruik . Houd er echter rekening **DOES NOT** mee dat Azure AD `mS-DS-ConsistencyGuid` Connect de waarde van het kenmerk in AD NIET terugschrijft.

Tijdens een scenario voor het verplaatsen van een forestwaarin een groepsobject van het ene forest (bijvoorbeeld F1) naar een ander forest gaat (bijvoorbeeld F2), moeten we de `mS-DS-ConsistencyGuid` waarde (Als AANWEZIG) of `objectGUID` de waarde van het object in forest F1 naar het `mS-DS-ConsistencyGuid` kenmerk van het object in F2 kopiëren. 

Gebruik de volgende scripts als richtlijn om te zien hoe u één groep migreren van forest F1 naar forest F2. Gebruik dit gratis als richtlijn om de migratie voor meerdere groepen uit te brengen.

Eerst krijgen we `objectGUID` `mS-DS-ConsistencyGuid` het en van de groep object in bos F1. Deze kenmerken worden geëxporteerd naar een CSV-bestand.
```
<#
DESCRIPTION
============
This script will take DN of a group as input.
It then copies the objectGUID and mS-DS-ConsistencyGuid values along with other attributes of the given group to a CSV file.

This CSV file can then be used as input to Export-Group script
#>
Param(
       [ValidateNotNullOrEmpty()]
       [string]
       $dn,

       [ValidateNotNullOrEmpty()]
       [string]
       $outputCsv
)

$defaultProperties = @('samAccountName', 'distinguishedName', 'objectGUID', 'mS-DS-ConsistencyGuid')
$group  = Get-ADGroup -Filter "DistinguishedName -eq '$dn'" -Properties $defaultProperties -ErrorAction Stop
$results = @()
if ($group -eq $null)
{
       Write-Error "Group not found"
}
else
{
       $objectGUIDValue = [GUID]$group.'objectGUID'
       $mSDSConsistencyGuidValue = "N/A"
       if ($group.'mS-DS-ConsistencyGuid' -ne $null)
       {
              $mSDSConsistencyGuidValue = [GUID]$group.'mS-DS-ConsistencyGuid'
       }
       $adgroup = New-Object -TypeName PSObject
       $adgroup | Add-Member -MemberType NoteProperty -Name samAccountName -Value $($group.'samAccountName')
       $adgroup | Add-Member -MemberType NoteProperty -Name distinguishedName -Value $($group.'distinguishedName')
       $adgroup | Add-Member -MemberType NoteProperty -Name objectGUID -Value $($objectGUIDValue)
       $adgroup | Add-Member -MemberType NoteProperty -Name mS-DS-ConsistencyGuid -Value $($mSDSConsistencyGuidValue)
       $results += $adgroup
}

Write-Host "Exporting group to output file"
$results | Export-Csv "$outputCsv" -NoTypeInformation

```

Vervolgens gebruiken we het CSV-bestand `mS-DS-ConsistencyGuid` voor gegenereerde uitvoer om het kenmerk op het doelobject in forest F2 te stempelen.


```
<#
DESCRIPTION
============
This script will take DN of a group as input and the CSV file that was generated by Import-Group script
It copies either the objectGUID or mS-DS-ConsistencyGuid value from CSV file to the given object.

#>
Param(
       [ValidateNotNullOrEmpty()]
       [string]
       $dn,

       [ValidateNotNullOrEmpty()]
       [string]
       $inputCsv
)

$group  = Get-ADGroup -Filter "DistinguishedName -eq '$dn'" -ErrorAction Stop
if ($group -eq $null)
{
       Write-Error "Group not found"
}

$csvFile = Import-Csv -Path $inputCsv -ErrorAction Stop
$msDSConsistencyGuid = $csvFile.'mS-DS-ConsistencyGuid'
$objectGuid = [GUID] $csvFile.'objectGUID'
$targetGuid = $msDSConsistencyGuid

if ($msDSConsistencyGuid -eq "N/A")
{
       $targetGuid = $objectGuid
}

Set-ADGroup -Identity $dn -Replace @{'mS-DS-ConsistencyGuid'=$targetGuid} -ErrorAction Stop

```

## <a name="next-steps"></a>Volgende stappen
Lees meer over het [integreren van uw on-premises identiteiten met Azure Active Directory](whatis-hybrid-identity.md).
