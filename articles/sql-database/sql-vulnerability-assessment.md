---
title: Evaluatie van SQL-beveiligingsproblemen
description: Meer informatie over het configureren en evalueren van SQL-beveiligings problemen op SQL Database, en het interpreteren van de evaluatie rapporten.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: mibar
ms.author: mibar
ms.reviewer: vanto, carlrab
ms.date: 02/05/2020
tags: azure-synapse
ms.openlocfilehash: 87f3c4b0489c48f758ce9e660bdfd599c086b677
ms.sourcegitcommit: 225a0b8a186687154c238305607192b75f1a8163
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 02/29/2020
ms.locfileid: "78191976"
---
# <a name="sql-vulnerability-assessment-service-helps-you-identify-database-vulnerabilities"></a>De evaluatie service van SQL-beveiligings problemen helpt u bij het identificeren van database lekken

Evaluatie van SQL-beveiligings problemen is een eenvoudig te configureren service die u kunt gebruiken om potentiÃ«le database problemen op te lossen, op te sporen en te verhelpen. Gebruik de service om de beveiliging van uw database proactief te verbeteren.

De evaluatie van beveiligings problemen maakt deel uit van de aanbieding voor [geavanceerde gegevens beveiliging](sql-database-advanced-data-security.md) (ADS), een uniform pakket voor geavanceerde SQL-beveiligings mogelijkheden. De evaluatie van beveiligings problemen kan worden geopend en beheerd via de centrale SQL ADS-Portal.

> [!NOTE]
> Evaluatie van beveiligings problemen wordt ondersteund voor Azure SQL Database, Azure SQL Managed instance en Azure Synapse Analytics. Ter vereenvoudiging wordt SQL Database in dit artikel gebruikt bij het verwijzen naar een van deze beheerde database services.

## <a name="the-vulnerability-assessment-service"></a>De evaluatie service voor beveiligings problemen

Evaluatie van SQL-beveiligings problemen (VA) is een service die inzicht krijgt in uw beveiligings status, en die stappen bevat die kunnen worden uitgevoerd om beveiligings kwesties op te lossen en uw database beveiliging te verbeteren. Dit kan u helpen:  

- Voldoen aan nalevings vereisten waarvoor database scan rapporten zijn vereist.  
- Voldoen aan de normen voor gegevens privacy.  
- Een dynamische database omgeving bewaken waarbij wijzigingen moeilijk te volgen zijn.  

Evaluatie van beveiligings problemen is een scan service die in de Azure SQL Database-Service is ingebouwd. De service maakt gebruik van een Knowledge Base met regels waarmee beveiligings problemen worden gemarkeerd en afwijkingen van best practices worden gemarkeerd, zoals onjuiste configuratie, overmatige machtigingen en onbeveiligde gevoelige gegevens. De regels zijn gebaseerd op de best practices van micro soft en zich richten op de beveiligings problemen die de grootste Risico's voor uw data base en de waardevolle gegevens van de computer opleveren. Ze omvatten zowel problemen op database niveau als beveiligings problemen op server niveau, zoals Server firewall-instellingen en machtigingen op server niveau. Deze regels vormen ook een groot aantal vereisten van verschillende regelgevende instanties om te voldoen aan de nalevings normen.  

De resultaten van de scan zijn onder andere stappen die kunnen worden uitgevoerd om elk probleem op te lossen en indien van toepassing aangepaste herstel scripts te bieden. Een evaluatie rapport kan worden aangepast voor uw omgeving door een acceptabele basis lijn in te stellen voor de configuratie van machtigingen, functie configuraties en data base-instellingen.

## <a name="implementing-vulnerability-assessment"></a>Evaluatie van beveiligings problemen implementeren

Voer de volgende stappen uit om VA op SQL Database te implementeren.  

### <a name="1-run-a-scan"></a>1. een scan uitvoeren  

Ga aan de slag met VA door te navigeren naar **geavanceerde gegevens beveiliging** onder de kop beveiliging in het deel venster Azure SQL database. Klik om geavanceerde gegevens beveiliging in te scha kelen en klik vervolgens op **opslag selecteren** of op de kaart voor de **evaluatie van beveiligings problemen** , waarmee automatisch de kaart instellingen voor evaluatie van beveiligings problemen wordt geopend voor de volledige SQL Server.

Begin met het configureren van een opslag account waarin de scan resultaten voor alle data bases op de server worden opgeslagen. Zie [over Azure Storage-accounts](../storage/common/storage-create-storage-account.md)voor meer informatie over opslag accounts. Zodra de opslag is geconfigureerd, klikt u op **scannen** om uw data base te scannen op beveiligings problemen.
  
![Een Data Base scannen](./media/sql-vulnerability-assessment/pp_va_initialize.png)  

  > [!NOTE]
  > De scan is licht gewicht en veilig. Het duurt een paar seconden om uit te voeren en is volledig alleen-lezen. Er worden geen wijzigingen aangebracht in uw data base.  

### <a name="2-view-the-report"></a>2. het rapport weer geven

Wanneer de scan is voltooid, wordt uw Scan rapport automatisch weer gegeven in de Azure Portal. Het rapport bevat een overzicht van de beveiligings status: hoeveel problemen er zijn gevonden en wat de bijbehorende ernst zijn. De resultaten omvatten waarschuwingen over de aanbevolen procedures en een moment opname van de beveiligings instellingen, zoals databaseprincipal en rollen en de bijbehorende machtigingen. Het Scan rapport bevat ook een overzicht van gevoelige gegevens die in uw data base zijn gedetecteerd en bevat aanbevelingen voor het classificeren van die gegevens met behulp van [gegevens detectie & classificatie](sql-database-data-discovery-and-classification.md).

![Bekijk het rapport](./media/sql-vulnerability-assessment/pp_main_getstarted.png)  

### <a name="3-analyze-the-results-and-resolve-issues"></a>3. Analyseer de resultaten en los problemen op

Bekijk uw resultaten en bepaal de bevindingen in het rapport die van toepassing zijn op beveiligings problemen in uw omgeving. Inzoomen op elk mislukt resultaat om inzicht te krijgen in de gevolgen van het zoeken en waarom elke beveiligings controle is mislukt. Gebruik de door het rapport verstrekte herstel gegevens om het probleem op te lossen.  

![Het rapport analyseren](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)

### <a name="4-set-your-baseline"></a>4. de basis lijn instellen

Wanneer u de evaluatie resultaten bekijkt, kunt u specifieke resultaten markeren als een acceptabele *basis lijn* in uw omgeving. De basis lijn is in feite een aanpassing van de manier waarop de resultaten worden gerapporteerd. Resultaten die overeenkomen met de basis lijn, worden beschouwd als het door geven van de daaropvolgende scans. Zodra u de beveiligings status van uw basis lijn hebt ingesteld, worden alleen rapporten met VA-afwijkingen van de basis lijn in rekening gebracht en kunt u uw aandacht richten op de relevante problemen.  

![Uw basis lijn instellen](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)  

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. Voer een nieuwe scan uit om het aangepaste tracking rapport te bekijken

Wanneer u klaar bent met het instellen van de **basis lijnen**van uw regel, voert u een nieuwe scan uit om het aangepaste rapport weer te geven. Met VA worden nu alleen de beveiligings problemen gerapporteerd die afwijken van uw goedgekeurde basislijn status.

![Uw aangepaste rapport weer geven](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)  

De evaluatie van beveiligings problemen kan nu worden gebruikt om te controleren of uw Data Base op elk moment een hoog niveau van beveiliging houdt en dat aan uw organisatie beleid wordt voldaan. Als nalevings rapporten vereist zijn, kunnen VA-rapporten handig zijn om het nalevings proces te vergemakkelijken.  

### <a name="6-set-up-periodic-recurring-scans"></a>6. periodieke terugkerende scans instellen

Ga naar de instellingen voor evaluatie van beveiligings problemen om **periodieke terugkerende scans**in te scha kelen. Hiermee configureert u de evaluatie van beveiligings problemen om een keer per week automatisch een scan uit te voeren op uw data base. Er wordt een overzicht van de scan resultaten verzonden naar de e-mail adressen die u opgeeft.

![Uw aangepaste rapport weer geven](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

### <a name="7-export-an-assessment-report"></a>7. een evaluatie rapport exporteren

Klik op **scan resultaten exporteren** om een Excel-rapport te downloaden dat kan worden gedownload van het resultaat van de scan. Dit rapport bevat een tabblad samen vatting waarop een samen vatting van de evaluatie wordt weer gegeven, inclusief alle mislukte controles. Het bevat ook een tabblad **resultaten** met de volledige set resultaten van de scan, met inbegrip van alle controles die zijn uitgevoerd en de resultaat Details voor elk.

### <a name="8-view-scan-history"></a>8. Scan geschiedenis weer geven

Klik op **Scan geschiedenis** in het deel venster VA om een geschiedenis weer te geven van alle scans die eerder zijn uitgevoerd op deze data base. Selecteer een bepaalde scan in de lijst om de gedetailleerde resultaten van die scan te bekijken.

De evaluatie van beveiligings problemen kan nu worden gebruikt om te controleren of uw Data Base op elk moment een hoog niveau van beveiliging houdt en dat aan uw organisatie beleid wordt voldaan. Als nalevings rapporten vereist zijn, kunnen VA-rapporten handig zijn om het nalevings proces te vergemakkelijken.

## <a name="manage-vulnerability-assessments-using-azure-powershell"></a>Beveiligings evaluaties beheren met behulp van Azure PowerShell

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]
> [!IMPORTANT]
> De Power shell-Azure Resource Manager module wordt nog steeds ondersteund door Azure SQL Database, maar alle toekomstige ontwikkeling is voor de module AZ. SQL. Zie [AzureRM. SQL](https://docs.microsoft.com/powershell/module/AzureRM.Sql/)voor deze cmdlets. De argumenten voor de opdrachten in de module AZ en in de AzureRm-modules zijn aanzienlijk identiek.

U kunt Azure PowerShell-cmdlets gebruiken om de evaluatie van beveiligings problemen programmatisch te beheren. De ondersteunde cmdlets zijn:

- [Update-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting)

  Hiermee worden de instellingen voor evaluatie van beveiligings problemen van een Data Base bijgewerkt
- [Get-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting)

  Retourneert de instellingen voor evaluatie van beveiligings problemen van een Data Base
- [Clear-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting)

  Wist de instellingen voor evaluatie van beveiligings problemen van een Data Base
- [Set-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Hiermee stelt u de regel voor de evaluatie van beveiligings problemen.
- [Get-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Hiermee wordt de regel basislijn voor evaluatie van beveiligings problemen opgehaald voor een bepaalde regel.
- [Clear-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Hiermee wist u de regel basis voor de evaluatie van beveiligings problemen. Stel eerst de basis lijn in voordat u deze cmdlet wist.
- [Start-AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan)

  Hiermee wordt het starten van een controle op beveiligings lekken geactiveerd
- [Get-AzSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord)

   Hiermee haalt u alle controle record (s) voor evaluatie van beveiligings problemen die zijn gekoppeld aan een bepaalde data base.
- [Convert-AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan)

  Hiermee wordt de scan resultaten voor de evaluatie van beveiligings problemen geconverteerd naar een Excel-bestand

Zie voor een script voorbeeld de [Power Shell-ondersteuning voor beveiligings problemen van Azure SQL](https://blogs.msdn.microsoft.com/sqlsecurity/20../../azure-sql-vulnerability-assessment-now-with-powershell-support/).

## <a name="manage-vulnerability-assessments-baseline-rules-using-resource-manager-templates"></a>Beveiligings lekken evalueren basislijn regels met behulp van Resource Manager-sjablonen

Gebruik het `Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines` type als u basis lijnen voor de evaluatie van beveiligings problemen wilt configureren met behulp van Azure Resource Manager sjablonen.

Zorg ervoor dat u vulnerabilityAssements hebt ingeschakeld op de computer met SQL Server voordat u basis lijnen toevoegt.

Hier volgt een voor beeld van het definiÃ«ren van basislijn regel VA2065 in masterdb en VA1143 userdb als resources in een resource manager-sjabloon:

```json
    "resources": [
        {
            "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
            "apiVersion": "2018-06-01-preview",
            "name": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/master')]",
            "properties": {
                "baselineResults": [
                    {
                        "result": [
                                "FirewallRuleName3",
                                "StartIpAddress",
                                "EndIpAddress"
                                  ]
                    },{
                         "result": [
                                "FirewallRuleName4",
                                "62.92.15.68",
                                "62.92.15.68"
                            ]
                        
                    }
                ]
            },
        {
            "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
            "apiVersion": "2018-06-01-preview",
            "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA2130/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
            ],
            "properties": {
                "baselineResults": [
                    {
                        "result": [
                            "dbo"
                        ]
                    }
                ]
            }
        }
    ]
}   
```

Voor de gebruikers database en de hoofd database zijn de resource namen op verschillende manieren gedefinieerd:

* Hoofd database-"naam": "[concat (para meters (' server_name '), '/', para meters (' database_name '), '/default/VA2065/<b>Master</b>')]",
* Gebruikers database-"naam": "[concat (para meters (' server_name '), '/', para meters (' database_name '), '/default/VA2065/<b>default</b>')]",
 
 
 Als u <b>Boole</b> -typen wilt afhandelen als waar/onwaar, stelt u het basislijn resultaat in op een binaire invoer zoals ' 1 '/' 0 '.
 
 ```json
        {
            "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
            "apiVersion": "2018-06-01-preview",
            "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA1143/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
            ],
            "properties": {
                "baselineResults": [
                    {
                        "result": [
                            "1"
                        ]
                    }
                ]
            }
        }
    ]
}   
```
 
 
## <a name="next-steps"></a>Volgende stappen  

- Meer informatie over [geavanceerde gegevens beveiliging](sql-database-advanced-data-security.md)
- Meer informatie over de [classificatie van gegevens detectie &](sql-database-data-discovery-and-classification.md)
