---
title: Evaluatie van SQL-beveiligingsproblemen
description: Meer informatie over het configureren van SQL Vulnerability Assessment op Azure SQL Database en het interpreteren van de beoordelingsrapporten.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: mibar
ms.author: mibar
ms.reviewer: vanto, carlrab
ms.date: 04/19/2020
tags: azure-synapse
ms.openlocfilehash: 80629898b56f81fc738cb30df63766ea39adea6d
ms.sourcegitcommit: acb82fc770128234f2e9222939826e3ade3a2a28
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 04/21/2020
ms.locfileid: "81684254"
---
# <a name="sql-vulnerability-assessment-helps-you-identify-database-vulnerabilities"></a>SQL Vulnerability Assessment helpt u bij het identificeren van databasekwetsbaarheden

SQL Vulnerability Assessment is een eenvoudig te configureren service die potentiële databasekwetsbaarheden kan opsporen, bijhouden en helpen oplossen. Gebruik de service om de beveiliging van uw database proactief te verbeteren.

Vulnerability Assessment maakt deel uit van het [Advanced Data Security-aanbod,](sql-database-advanced-data-security.md) een uniform pakket voor geavanceerde SQL-beveiligingsmogelijkheden. Kwetsbaarheidsbeoordeling kan worden geopend en beheerd via de centrale SQL Advanced Data Security-portal.

> [!NOTE]
> Kwetsbaarheidsbeoordeling wordt ondersteund voor Azure SQL Database, Azure SQL Database managed instance en Azure Synapse Analytics. Voor de eenvoud wordt SQL Database in dit artikel gebruikt wanneer u verwijst naar een van deze beheerde databaseservices.

## <a name="vulnerability-assessment"></a>Beoordeling van beveiligingslekken

SQL Vulnerability Assessment is een service die inzicht biedt in uw beveiligingsstatus. Kwetsbaarheidsbeoordeling bevat bruikbare stappen om beveiligingsproblemen op te lossen en de beveiliging van uw database te verbeteren. Het kan u helpen: 

- Voldoe aan nalevingsvereisten waarvoor databasescanrapporten nodig zijn.
- Voldoe aan de privacynormen voor gegevens.
- Monitor een dynamische databaseomgeving waar wijzigingen moeilijk te volgen zijn.

Vulnerability Assessment is een scanservice die is ingebouwd in Azure SQL Database. De service maakt gebruik van een kennisbank van regels die beveiligingsproblemen markeren. Het belicht afwijkingen van aanbevolen procedures, zoals verkeerde configuraties, overmatige machtigingen en onbeveiligde gevoelige gegevens.

De regels zijn gebaseerd op de best practices van Microsoft en richten zich op de beveiligingsproblemen die de grootste risico's voor uw database en de waardevolle gegevens vormen. Ze hebben betrekking op problemen op databaseniveau en beveiligingsproblemen op serverniveau, zoals serverfirewall-instellingen en machtigingen op serverniveau. Deze regels vertegenwoordigen ook veel van de vereisten van verschillende regelgevende instanties om aan hun nalevingsnormen te voldoen.

De resultaten van de scan bevatten bruikbare stappen om elk probleem op te lossen en waar van toepassing aangepaste herstelscripts te bieden. U een beoordelingsrapport voor uw omgeving aanpassen door een acceptabele basislijn in te stellen voor:
* Machtigingsconfiguraties.
* Functieconfiguraties.
* Database-instellingen.

## <a name="implement-vulnerability-assessment"></a>Kwetsbaarheidsbeoordeling implementeren

De volgende stappen implementeren Kwetsbaarheidsbeoordeling op SQL Database.

### <a name="1-run-a-scan"></a>1. Voer een scan uit

Selecteer in het deelvenster Azure SQL Database onder de kop **Beveiliging** de optie **Geavanceerde gegevensbeveiliging**. Klik vervolgens op **Opslag selecteren** in het deelvenster **Kwetsbaarheidsbeoordeling** om het deelvenster Instellingen voor kwetsbaarheidsbeoordeling voor de gehele SQL-server te openen.

Configureer een opslagaccount waarin de resultaten van uw scan voor alle databases op de server worden opgeslagen. Zie [Over Azure-opslagaccounts](../storage/common/storage-create-storage-account.md)voor informatie over opslagaccounts . Nadat de opslag is geconfigureerd, selecteert u **Scannen** om uw database te scannen op kwetsbaarheden.

![Een database scannen](./media/sql-vulnerability-assessment/pp_va_initialize.png)

  > [!NOTE]
  > De scan is licht van gewicht en veilig. Het duurt een paar seconden om uit te voeren en is volledig alleen-lezen. Het brengt geen wijzigingen aan in uw database.

### <a name="2-view-the-report"></a>2. Bekijk het rapport

Wanneer uw scan is voltooid, wordt uw scanrapport automatisch weergegeven in de Azure-portal. Het rapport geeft een overzicht van uw veiligheidstoestand. Het geeft aan hoeveel problemen zijn gevonden en hun respectieve ernst. De resultaten omvatten waarschuwingen over afwijkingen van aanbevolen procedures en een momentopname van uw beveiligingsinstellingen, zoals databaseprincipals en rollen en de bijbehorende machtigingen. Het scanrapport bevat ook een kaart met gevoelige gegevens die in uw database zijn ontdekt. Het bevat aanbevelingen om die gegevens te classificeren met behulp van [gegevensdetectie en -classificatie.](sql-database-data-discovery-and-classification.md)

![Bekijk het rapport](./media/sql-vulnerability-assessment/pp_main_getstarted.png)

### <a name="3-analyze-the-results-and-resolve-issues"></a>3. Analyseer de resultaten en los problemen op

Bekijk uw resultaten en bepaal de bevindingen in het rapport die echte beveiligingsproblemen in uw omgeving zijn. Inzoomen op elk mislukt resultaat om de impact van de bevinding te begrijpen en waarom elke beveiligingscontrole is mislukt. Gebruik de bruikbare herstelgegevens die door het rapport worden verstrekt om het probleem op te lossen.

![Het rapport analyseren](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)

### <a name="4-set-your-baseline"></a>4. Stel uw basislijn in

Terwijl u uw beoordelingsresultaten bekijkt, u specifieke resultaten markeren als een acceptabele *basislijn* in uw omgeving. De basislijn is in wezen een aanpassing van hoe de resultaten worden gerapporteerd. Resultaten die overeenkomen met de basislijn worden beschouwd als het passeren van latere scans. Nadat u uw basislijnbeveiligingsstatus hebt vastgesteld, rapporteert Kwetsbaarheidsbeoordeling alleen over afwijkingen van de basislijn. Op deze manier u uw aandacht richten op de relevante vraagstukken.

![Uw basislijn instellen](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. Voer een nieuwe scan uit om uw aangepaste trackingrapport te bekijken

Nadat u klaar bent met het instellen van de **regelbasislijnen,** voert u een nieuwe scan uit om het aangepaste rapport weer te geven. Kwetsbaarheidsbeoordeling rapporteert nu alleen de beveiligingsproblemen die afwijken van de goedgekeurde basislijnstatus.

![Uw aangepaste rapport weergeven](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)

Kwetsbaarheidsbeoordeling kan nu worden gebruikt om te controleren of uw database te allen tijde een hoog beveiligingsniveau behoudt en dat aan uw organisatiebeleid wordt voldaan. Als nalevingsrapporten vereist zijn, kunnen rapporten over kwetsbaarheidsbeoordeling nuttig zijn om het nalevingsproces te vergemakkelijken.

### <a name="6-set-up-periodic-recurring-scans"></a>6. Periodieke terugkerende scans instellen

Ga naar de instellingen voor kwetsbaarheidsbeoordeling om **periodieke terugkerende scans**in te schakelen. Met deze instelling configureert u kwetsbaarheidsbeoordeling om automatisch één keer per week een scan in uw database uit te voeren. Er wordt een overzicht van het scanresultaat verzonden naar de e-mailadressen die u opgeeft.

![Uw aangepaste rapport weergeven](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

### <a name="7-export-an-assessment-report"></a>7. Een beoordelingsrapport exporteren

Selecteer **Scanresultaten exporteren** om een downloadbaar Excel-rapport van uw scanresultaat te maken. Dit rapport bevat een overzichtstabblad met een samenvatting van de beoordeling. Het rapport bevat alle mislukte controles. Het bevat ook een tabblad **Resultaten** met de volledige set resultaten van de scan. De resultaten omvatten alle controles die zijn uitgevoerd en de resultaatdetails voor elk.

### <a name="8-view-scan-history"></a>8. Bekijk de scangeschiedenis

Selecteer **Scangeschiedenis** in het deelvenster Kwetsbaarheidsbeoordeling om een geschiedenis weer te geven van alle scans die eerder in deze database zijn uitgevoerd. Selecteer een bepaalde scan in de lijst om de gedetailleerde resultaten van die scan weer te geven.

Kwetsbaarheidsbeoordeling kan nu worden gebruikt om te controleren of uw database te allen tijde een hoog beveiligingsniveau behoudt en dat aan uw organisatiebeleid wordt voldaan. Als nalevingsrapporten vereist zijn, kunnen rapporten over kwetsbaarheidsbeoordeling nuttig zijn om het nalevingsproces te vergemakkelijken.

## <a name="manage-vulnerability-assessments-by-using-azure-powershell"></a>Kwetsbaarheidsbeoordelingen beheren met Azure PowerShell

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]
> [!IMPORTANT]
> De PowerShell Azure Resource Manager-module wordt nog steeds ondersteund door Azure SQL Database, maar alle toekomstige ontwikkelingen zijn voor de Az.Sql-module. Zie [AzureRM.Sql](https://docs.microsoft.com/powershell/module/AzureRM.Sql/)voor deze cmdlets. De argumenten voor de opdrachten in de Az-module en in de AzureRm-modules zijn nagenoeg identiek.

U Azure PowerShell-cmdlets gebruiken om uw kwetsbaarheidsbeoordelingen programmatisch te beheren. De ondersteunde cmdlets zijn:

| Cmdlet-naam als koppeling | Beschrijving |
| :-------------------- | :---------- |
| [Clear-azsqldatabasevulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Wist de basislijn van de regel voor kwetsbaarheidsbeoordeling.<br/>Stel eerst de basislijn in voordat u deze cmdlet gebruikt om deze te wissen. |
| [Clear-azsqldatabaseVulnerabilityAssessmentInstelling](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting) | Wist de instellingen voor kwetsbaarheidsbeoordeling van een database. |
| [Convert-AzsqlDatabaseVulnerabilityAssessmentScan converteren-azsqldatabaseVulnerabilityScan](https://docs.microsoft.com/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan) | Hiermee worden de resultaten van de kwetsbaarheidsbeoordeling geconverteerd naar een Excel-bestand. |
| [Get-azsqldatabasevulnerabilityassessmentrulebaseline](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Hier krijgt u de basislijn voor de regel kwetsbaarheidsbeoordeling voor een bepaalde regel. |
| [Get-AzSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord) | Hiermee worden alle scanrecords voor kwetsbaarheidsbeoordelingen gekoppeld aan een bepaalde database. |
| [Get-azsqldatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting) | Retourneert de instellingen voor kwetsbaarheidsbeoordeling van een database. |
| [Set-azsqldatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Hiermee stelt u de basislijn van de regel voor kwetsbaarheidsbeoordeling in. |
| [Start-AzsqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan) | Hiermee wordt het begin van een kwetsbaarheidsbeoordeling gestart. |
| [Update-azsqldatabasevulnerabilityAssessmentInstelling](https://docs.microsoft.com/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting) | Hiermee worden de instellingen voor kwetsbaarheidsbeoordeling van een database bijgewerkt. |
| &nbsp; | &nbsp; |

Zie Azure SQL [Vulnerability Assessment PowerShell-ondersteuning](https://blogs.msdn.microsoft.com/sqlsecurity/20../../azure-sql-vulnerability-assessment-now-with-powershell-support/)voor een scriptvoorbeeld.

## <a name="manage-vulnerability-assessment-baseline-rules-by-using-resource-manager-templates"></a>Basislijnregels voor kwetsbaarheidsbeoordeling beheren met behulp van ResourceManager-sjablonen

Als u basislijnen voor kwetsbaarheidsbeoordeling wilt `Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines` configureren met Azure Resource Manager-sjablonen, gebruikt u het type.

Controleer of u `vulnerabilityAssessments` sql server hebt ingeschakeld op de computer waarop SQL Server wordt uitgevoerd voordat u basislijnen toevoegt.

Hier is een voorbeeld voor het definiëren van basislijnregel VA2065 naar masterdb en VA1143 naar userdb als resources in een Resource Manager-sjabloon:

```json
   "resources": [
      {
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/master')]",
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "FirewallRuleName3",
                     "StartIpAddress",
                     "EndIpAddress"
                  ]
               },
               {
                  "result": [
                     "FirewallRuleName4",
                     "62.92.15.68",
                     "62.92.15.68"
                  ]
               }
            ]
         },
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA2130/Default')]",
         "dependsOn": [
            "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
         ],
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "dbo"
                  ]
               }
            ]
         }
      }
   ]
```

Voor hoofddatabase en gebruikersdatabase worden de bronnamen anders gedefinieerd:

* Hoofddatabase - "naam": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/master ')]",,<b>master</b>
* Gebruikersdatabase - "naam": "[concat(parameters('server_name'),'/', parameters('database_name') , "/default/VA2065/<b>default</b>')]",
 
 
 Als u Booleaanse typen als true/false wilt verwerken, stelt u het basislijnresultaat in met binaire invoer zoals "1"/"0".
 
```json
   {
      "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
      "apiVersion": "2018-06-01-preview",
      "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA1143/Default')]",

      "dependsOn": [
         "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
      ],

      "properties": {
         "baselineResults": [
            {
               "result": [
                  "1"
               ]
            }
         ]
      }

   }
```

## <a name="next-steps"></a>Volgende stappen  

- Meer informatie over [geavanceerde gegevensbeveiliging](sql-database-advanced-data-security.md).
- Meer informatie over [gegevensdetectie en -classificatie](sql-database-data-discovery-and-classification.md).
