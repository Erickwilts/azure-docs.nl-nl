---
title: Azure Service Bus-berichten, nettoladingen en serialisatie | Microsoft Docs
description: Overzicht van Service Bus-bericht-nettoladingen
services: service-bus-messaging
documentationcenter: ''
author: axisc
manager: timlt
editor: spelluru
ms.service: service-bus-messaging
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/26/2018
ms.author: aschhab
ms.openlocfilehash: 3158f0255810c66605d28856133112181c2916db
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 06/13/2019
ms.locfileid: "61315636"
---
# <a name="messages-payloads-and-serialization"></a>Berichten, nettoladingen en serialisatie

Microsoft Azure Service Bus verwerkt berichten. Berichten voert een payload, evenals de metagegevens in de vorm van sleutel / waarde-paar eigenschappen, met een beschrijving van de nettolading en verwerking van instructies zodat tot Service Bus en toepassingen. Soms alleen metagegevens zijn voldoende voor het uitvoeren van de informatie die de afzender wil communiceren met ontvangers en de nettolading van de blijft leeg.

Het objectmodel van de officiële Service Bus-clients voor .NET, Java, weerspiegelen de samenvatting van Service Bus-bericht-structuur die is toegewezen en naar de Service Bus ondersteunt wire-protocollen.
 
Een Service Bus-bericht bestaat uit een binaire nettoladingsectie van die Service Bus nooit in een formulier aan de servicezijde en twee sets van eigenschappen verwerkt. De *eigenschappen broker* zijn vooraf gedefinieerd door het systeem. Deze vooraf gedefinieerde eigenschappen bepalen de functionaliteit van de bericht-niveau binnen de broker of deze worden toegewezen aan de metagegevens voor de algemene en gestandaardiseerde items. De *gebruikerseigenschappen* zijn een verzameling van sleutel / waarde-paren die kunnen worden gedefinieerd en ingesteld door de toepassing.
 
Eigenschappen van de vooraf gedefinieerde broker worden in de volgende tabel weergegeven. De namen worden gebruikt met alle officiële client-API's en ook in de [BrokerProperties](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) JSON-object van de toewijzing van het HTTP-protocol.
 
De equivalente namen gebruikt op het niveau van het AMQP-protocol worden weergegeven tussen haakjes. 

| De naam van eigenschap                         | Description                                                                                                                                                                                                                                                                                                                                                                                                                               |
|---------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  [ContentType](/dotnet/api/microsoft.azure.servicebus.message.contenttype) (inhoud-type)           | (Optioneel) wordt beschreven hoe u de nettolading van het bericht een descriptor volgende de indeling van RFC2045, sectie 5; bijvoorbeeld, `application/json`.                                                                                                                                                                                                                                                                                             |
|  [CorrelationId](/dotnet/api/microsoft.azure.servicebus.message.correlationid#Microsoft_Azure_ServiceBus_Message_CorrelationId) (correlatie-id)       | Hiermee wordt een toepassing om op te geven van een context voor het bericht voor de doeleinden van correlatie; bijvoorbeeld, dit weerspiegelt het **MessageId** van een bericht dat wordt beantwoord.                                                                                                                                                                                                                                                                  |
| [DeadLetterSource](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.deadlettersource)                      | Alleen ingesteld in berichten die dead lettered en vervolgens automatisch doorgestuurd van de wachtrij voor onbestelbare berichten met een andere entiteit zijn. Geeft aan dat de entiteit waarin het bericht als dead lettered onjuist. Deze eigenschap is alleen-lezen.                                                                                                                                                                                                                                  |
| [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.deliverycount)                         | Het aantal bezorgingen waartoe voor dit bericht. De telling wordt verhoogd wanneer een bericht vergrendeling is verlopen, of het bericht expliciet is afgebroken door de ontvanger. Deze eigenschap is alleen-lezen.                                                                                                                                                                                                                                                  |
| [EnqueuedSequenceNumber](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.enqueuedsequencenumber)                | Deze eigenschap weerspiegelt voor berichten die automatisch doorgestuurd zijn, het volgnummer dat had eerst is toegewezen aan het bericht op de oorspronkelijke punt van inzending. Deze eigenschap is alleen-lezen.                                                                                                                                                                                                                                                                |
| [EnqueuedTimeUtc](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.enqueuedtimeutc)                       | De directe UTC waarop het bericht is geaccepteerd en die zijn opgeslagen in de entiteit. Deze waarde kan worden gebruikt als de indicator van een bindende en neutrale aankomst tijd wanneer de ontvanger wil niet dat de afzender klok vertrouwt. Deze eigenschap is alleen-lezen.                                                                                                                                                                                                   |
|  [ExpiresAtUtc](/dotnet/api/microsoft.azure.servicebus.message.expiresatutc) (absolute-expiry-time) | De UTC-instant waarop het bericht gemarkeerd voor verwijdering en niet meer beschikbaar zijn voor het ophalen van de entiteit vanwege de vervaldatum is. Vervaldatum wordt bepaald door de **TimeToLive** en deze eigenschap worden berekend vanuit EnqueuedTimeUtc + TimeToLive. Deze eigenschap is alleen-lezen.                                                                                                                                                                           |
| [ForcePersistence](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.forcepersistence)                      | Voor wachtrijen of onderwerpen die de [EnableExpress](/dotnet/api/microsoft.servicebus.messaging.queuedescription.enableexpress) vlag ingesteld, deze eigenschap kan worden ingesteld om aan te geven dat het bericht moet worden opgeslagen op schijf voordat deze wordt bevestigd. Dit is de standaard-gedrag voor alle niet-express-entiteiten.                                                                                                                                                                                                         |
| [Label](/dotnet/api/microsoft.azure.servicebus.message.label) (onderwerp)                       | Deze eigenschap kan de toepassing om aan te geven van het doel van het bericht naar de ontvanger op een gestandaardiseerde manier, vergelijkbaar met een onderwerpregel e-mailbericht.                                                                                                                                                                                                                                                                                  |
| [LockedUntilUtc](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.lockeduntilutc)                        | Voor berichten die worden opgehaald in een vergrendeling (modus, niet vooraf verrekend peek-lock ontvangen) deze eigenschap weerspiegelt de directe UTC tot waar het bericht wordt bewaard in de wachtrij/abonnement vergrendeld. Wanneer de vergrendeling is verlopen, de [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.deliverycount) wordt verhoogd en het bericht weer beschikbaar is voor het ophalen van is. Deze eigenschap is alleen-lezen.                                                                                                                         |
| [LockToken](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.locktoken)                             | Het lock-token is een verwijzing naar de vergrendeling die wordt gehouden door de broker in *peek-lock* modus ontvangen. Het token kan worden gebruikt om vast te maken de vergrendeling permanent tot en met de [uitgestelde](message-deferral.md) API en met die het bericht uit de levering van normale status stroom. Deze eigenschap is alleen-lezen.                                                                                                                                                               |
| [MessageId](/dotnet/api/microsoft.azure.servicebus.message.messageid) (bericht-id)                | De bericht-id is een toepassing gedefinieerde waarde die een unieke identificatie van het bericht en de nettolading. De id is een tekenreeks met vrije vorm en kan betrekking hebben op een GUID of een id die is afgeleid van de context van de toepassing. Indien ingeschakeld, de [duplicaatdetectie](duplicate-detection.md) functie identificeert en verwijdert u seconde en verder verzendingen van berichten met dezelfde **MessageId**.                                                                |
| [partitionKey](/dotnet/api/microsoft.azure.servicebus.message.partitionkey)                          | Voor [gepartitioneerde entiteiten](service-bus-partitioning.md), als u deze waarde kunt toewijzen gerelateerde berichten naar dezelfde interne partitie, zodat de volgorde van de verzending van correct is geregistreerd. De partitie is gekozen door een hash-functie op deze waarde en kan niet rechtstreeks worden gekozen. Voor sessie-bewuste entiteiten de **SessionId** eigenschap heeft voorrang op deze waarde.                                                                                                       |
| [ReplyTo](/dotnet/api/microsoft.azure.servicebus.message.replyto) (antwoord tot)                    | Deze optionele en toepassingsspecifieke waarde is een standaardmethode voor het snelle pad antwoord naar de ontvanger van het bericht. Wanneer een afzender wordt verwacht een antwoord dat, de waarde wordt ingesteld met het absolute of relatieve pad van de wachtrij of onderwerp die verwacht het antwoord dat moet worden verzonden naar.                                                                                                                                           |
| [ReplyToSessionId](/dotnet/api/microsoft.azure.servicebus.message.replytosessionid) (antwoord-naar-groep-id)  | Deze waarde verbetert de **ReplyTo** informatie en geeft aan welk **SessionId** moet worden ingesteld voor het antwoord als naar de entiteit antwoord verzonden.                                                                                                                                                                                                                                                                            |
| [ScheduledEnqueueTimeUtc](/dotnet/api/microsoft.azure.servicebus.message.scheduledenqueuetimeutc)               | Voor berichten die alleen beschikbaar voor het ophalen van na een vertraging zijn gemaakt, bepaalt deze eigenschap de directe UTC waarop het bericht logisch in wachtrij gezet is, gesequentieerd, en daarom beschikbaar gesteld voor het ophalen van.                                                                                                                                                                                                                 |
| [SequenceNumber](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.sequencenumber)                        | Het volgnummer is een unieke 64-bits geheel getal zijn toegewezen aan een bericht wanneer ze worden geaccepteerd en door de broker en functies als de waarde true-id opgeslagen. Voor gepartitioneerde entiteiten weerspiegelen de bovenste 16 bits de partitie-id. Volgnummers gestaag verhogen en worden zonder pauzes. Ze meenemen naar 0 als het bereik 48-64-bits is verbruikt. Deze eigenschap is alleen-lezen.                                                                |
| [Sessie-id](/dotnet/api/microsoft.azure.servicebus.message.sessionid) (groep-id)                  | Hiermee geeft u de relatie van de sessie van het bericht voor sessie-bewuste entiteiten op deze toepassing gedefinieerde waarde. Berichten met dezelfde sessie-id zijn onderhevig aan samenvatting vergrendelen en exacte in deze volgorde verwerken en demultiplexing inschakelen. Voor entiteiten die geen sessie-bewuste, wordt deze waarde genegeerd.                                                                                                                                     |
| [Grootte](/dotnet/api/microsoft.azure.servicebus.message.size)                                  | Terwijl de functie voor de opslag van inhoud telt, kunt u de opgeslagen grootte van het bericht in het logboek broker als een telling van bytes, weergegeven. Deze eigenschap is alleen-lezen.                                                                                                                                                                                                                                                                                                       |
| [status](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.state)                                 | Geeft de status van het bericht in het logboek. Deze eigenschap is alleen relevant tijdens het bericht te bladeren ("peek"), om te bepalen of een bericht 'actief' en beschikbaar zijn voor het ophalen van zoals het de bovenkant van de wachtrij bereikt, ongeacht of deze is uitgesteld of wacht om te worden gepland. Deze eigenschap is alleen-lezen.                                                                                                                                           |
| [TimeToLive](/dotnet/api/microsoft.azure.servicebus.message.timetolive)                            | Deze waarde is de relatieve periode waarna het bericht is verlopen, starten vanaf het moment van het bericht is geaccepteerd en die zijn opgeslagen door de broker, zoals vastgelegd in **EnqueueTimeUtc**. Wanneer niet expliciet is ingesteld, is de aangenomen dat de waarde de **DefaultTimeToLive** voor de betreffende wachtrij of onderwerp. Een bericht-niveau **TimeToLive** waarde mag niet langer zijn dan van de entiteit **DefaultTimeToLive** instelling. Als het langer is, wordt het op de achtergrond aangepast. |
| [Naar](/dotnet/api/microsoft.azure.servicebus.message.to) (tot)                               | Deze eigenschap is gereserveerd voor toekomstig gebruik in scenario's voor Routering en momenteel wordt genegeerd door de broker zelf. Toepassingen kunnen deze waarde in regel gebaseerde automatisch doorsturen chaining scenario's gebruiken om aan te geven van de logische bestemming van het bericht.                                                                                                                                                                                   |
| [ViaPartitionKey](/dotnet/api/microsoft.azure.servicebus.message.viapartitionkey)                       | Als een bericht wordt verzonden via een wachtrij voor overdracht binnen het bereik van een transactie, selecteert u deze waarde de partitie van de wachtrij overdracht.                                                                                                                                                                                                                                                                                                                 |

De abstracte bericht-model kunt een bericht te plaatsen naar een wachtrij via HTTP (eigenlijk altijd HTTPS) en kan worden opgehaald via AMQP. Het bericht ziet er in beide gevallen normale in de context van het betreffende protocol. Eigenschappen van de broker worden vertaald naar behoefte, en de gebruikerseigenschappen worden toegewezen aan de meest geschikte locatie op het betreffende protocol bericht-model. In HTTP-, eigenschappen van de gebruiker rechtstreeks naar en van HTTP-headers; toewijzen in AMQP deze worden toegewezen en naar de **toepassingseigenschappen** kaart.

## <a name="message-routing-and-correlation"></a>Berichtroutering en correlatie

Een subset van de eigenschappen van de broker beschreven eerder, in het bijzonder [naar](/dotnet/api/microsoft.azure.servicebus.message.to), [ReplyTo](/dotnet/api/microsoft.azure.servicebus.message.replyto), [ReplyToSessionId](/dotnet/api/microsoft.azure.servicebus.message.replytosessionid), [MessageId](/dotnet/api/microsoft.azure.servicebus.message.messageid), [ CorrelationId](/dotnet/api/microsoft.azure.servicebus.message.correlationid), en [SessionId](/dotnet/api/microsoft.azure.servicebus.message.sessionid), worden gebruikt om u te helpen bij toepassingen routeren van berichten naar bepaalde bestemmingen. Houd rekening met enkele patronen om dit illustreren:

- **Eenvoudige aanvraag/antwoord**: Een uitgever verzendt een bericht in een wachtrij wordt geplaatst en wordt verwacht dat een antwoord van de berichtconsument. Voor het ontvangen van het antwoord, de uitgever is eigenaar van een wachtrij waarin het antwoord moet worden geleverd verwacht. Het adres van deze wachtrij wordt uitgedrukt in de **ReplyTo** eigenschap van het uitgaande bericht. Wanneer de consument reageert, kopieert de **MessageId** van het verwerkte bericht in de **CorrelationId** eigenschap van het antwoordbericht en levert het bericht naar de bestemming door de aangegeven**ReplyTo** eigenschap. Meerdere antwoorden, afhankelijk van de context van de toepassing kan worden verkregen door één bericht.
- **Multicast-aanvraag/antwoord**: Als een variant van het vorige patroon van de uitgever wordt het bericht verzonden naar een onderwerp en meerdere abonnees in aanmerking komen voor het bericht in beslag nemen. Elk van de abonnees kan reageren op de wijze die eerder zijn beschreven. Dit patroon wordt gebruikt in scenario's detectie of implementatie-aanroep en hij doorgaans identificeert zelf met de gebruikerseigenschap van een of in de nettolading. Als **ReplyTo** verwijst naar een onderwerp, een set van detectie antwoorden kunnen worden gedistribueerd naar een publiek.
- **Multiplexing**: Met deze functie sessie kunnen multiplexing van stromen van gerelateerde berichten via een één wachtrij of abonnement, zodat elke sessie (of groep) van gerelateerde berichten, geïdentificeerd door de overeenkomende **SessionId** waarden, worden doorgestuurd naar een specifieke ontvanger bij de ontvanger heeft de sessie onder vergrendelen. Meer informatie over de details van sessies [hier](message-sessions.md).
- **Aanvraag/antwoord multiplex**: Deze functie sessie kunt multiplex antwoorden op enkele schijfversies voor het delen van een antwoordenwachtrij. Door in te stellen **ReplyToSessionId**, de uitgever kunt opgeven dat de consumer(s) om te kopiëren die waarde in de **SessionId** eigenschap van het antwoordbericht. De publicatie-wachtrij of onderwerp hoeft niet te worden op de sessie-hoogte. Als het bericht is verzonden, de uitgever vervolgens speciaal kunt wachten op een sessie met de opgegeven **SessionId** om te realiseren in de wachtrij door voorwaardelijk accepteren van de ontvanger van een sessie. 

Routering binnen een Service Bus-naamruimte kan worden gerealiseerd met automatisch doorsturen-koppeling en onderwerp abonnementsregels. Routering voor naamruimten, kan worden gerealiseerd [met behulp van Azure LogicApps](https://azure.microsoft.com/services/logic-apps/). Zoals aangegeven in de vorige lijst de **naar** eigenschap is gereserveerd voor toekomstig gebruik en uiteindelijk kunnen worden geïnterpreteerd door de broker met een speciaal geactiveerde functie. Toepassingen die u wilt implementeren routering moeten doen dus op basis van eigenschappen van de gebruiker en niet vertrouwt op de **naar** eigenschap; maar nu doet niet zullen compatibiliteitsproblemen.

## <a name="payload-serialization"></a>De nettolading van serialisatie

Als in-transit of opgeslagen op de Service Bus, de nettolading is altijd een ondoorzichtige, binaire-blok. De [ContentType](/dotnet/api/microsoft.azure.servicebus.message.contenttype) eigenschap kunt u toepassingen voor het beschrijven van de nettolading terecht, met de voorgestelde indeling voor de waarden van de eigenschap wordt een beschrijving van de MIME-inhoudstype op basis van de IETF RFC2045; bijvoorbeeld `application/json;charset=utf-8`.

In tegenstelling tot de varianten van de Java of .NET Standard, de .NET Framework-versie van de Service Bus-API biedt ondersteuning voor het maken van **BrokeredMessage** exemplaren doordat willekeurige .NET-objecten worden doorgegeven aan de constructor. 

Wanneer u de verouderde SBMP-protocol gebruikt, worden vervolgens die objecten geserialiseerd met de standaard binaire serializer, of met een serializer die extern worden verstrekt. Wanneer u het AMQP-protocol gebruikt, wordt het object wordt omgezet in een AMQP-object. De ontvanger kan ophalen die objecten met de [GetBody<T>()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.getbody#Microsoft_ServiceBus_Messaging_BrokeredMessage_GetBody__1) methode voor het leveren van het verwachte type. Met AMQP, de objecten worden geserialiseerd in een grafiek AMQP van **ArrayList** en **IDictionary < string, object >** objecten en een AMQP-client kan ze decoderen. 

Terwijl deze magic verborgen serialisatie handig is, moeten toepassingen expliciete overnemen van object serialisatie en hun objectgrafieken omzetten in streams voordat ze in een bericht en de omgekeerde aan de ontvanger doen. Dit oplevert interoperabele resultaten. Er moet ook worden opgemerkt dat het AMQP een krachtige binaire codering model is, deze aan de messaging-ecosysteem van AMQP gebonden is en HTTP-clients hebben problemen met het decoderen van dergelijke nettoladingen. 

In het algemeen wordt aangeraden JSON en Apache Avro als nettolading-indelingen voor gestructureerde gegevens.

Geef alleen toestemming varianten van de standaard .NET en Java-API bytematrices, wat betekent dat de toepassing moet worden gebruikt voor het afhandelen van besturingselement van de serialisatie-object. 

## <a name="next-steps"></a>Volgende stappen

Zie voor meer informatie over Service Bus-berichten, de volgende onderwerpen:

* [Service Bus-wachtrijen, -onderwerpen en -abonnementen](service-bus-queues-topics-subscriptions.md)
* [Aan de slag met Service Bus-wachtrijen](service-bus-dotnet-get-started-with-queues.md)
* [Service Bus-onderwerpen en -abonnementen gebruiken](service-bus-dotnet-how-to-use-topics-subscriptions.md)
