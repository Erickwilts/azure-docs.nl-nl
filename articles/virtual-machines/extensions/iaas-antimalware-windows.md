---
title: Microsoft Antimalware-extensie voor Windows VM's op Azure
description: Implementeer de Azure Antimalware-extensie op de virtuele machine van Windows met behulp van een extensie.
services: virtual-machines-windows
documentationcenter: ''
author: TomShinder
manager: gwallace
editor: ''
ms.assetid: ''
ms.service: virtual-machines-windows
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: infrastructure-services
ms.date: 04/12/2018
ms.author: tomsh
ms.openlocfilehash: 4cdde31bb25dc9834ba53539c33c4e49c952840a
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 03/28/2020
ms.locfileid: "79253817"
---
# <a name="microsoft-antimalware-extension-for-windows"></a>Microsoft Antimalware-extensie voor Windows

## <a name="overview"></a>Overzicht

Het moderne dreigingslandschap voor cloudomgevingen is uiterst dynamisch en verhoogt de druk op zakelijke IT-cloudabonnees om effectieve bescherming te behouden om te voldoen aan de nalevings- en beveiligingsvereisten. Microsoft Antimalware voor Azure is gratis real-time beveiligingsmogelijkheden die helpt bij het identificeren en verwijderen van virussen, spyware en andere schadelijke software, met configureerbare waarschuwingen wanneer bekende schadelijke of ongewenste software zichzelf probeert te installeren of op uw Azure-systemen. De oplossing is gebouwd op hetzelfde antimalwareplatform als Microsoft Security Essentials (MSE), Microsoft Forefront Endpoint Protection, Microsoft System Center Endpoint Protection, Windows Intune en Windows Defender voor Windows 8.0 en hoger.
Microsoft Antimalware voor Azure is een oplossing voor toepassingen en tenantomgevingen, ontworpen om op de achtergrond te worden uitgevoerd zonder menselijke tussenkomst. U beveiliging implementeren op basis van de behoeften van uw toepassingsworkloads, met een basisveilige of geavanceerde aangepaste configuratie, inclusief antimalwarebewaking.

## <a name="prerequisites"></a>Vereisten

### <a name="operating-system"></a>Besturingssysteem

De Microsoft Antimalware voor Azure-oplossing omvat de Microsoft Antimalware-client en -service, het klassieke implementatiemodel Antimalware, antimalware PowerShell-cmdlets en Azure Diagnostics Extension. De Microsoft Antimalware-oplossing wordt ondersteund op windows server 2008 R2, Windows Server 2012 en Windows Server 2012 R2-besturingssysteemfamilies. Het wordt niet ondersteund op het Windows Server 2008-besturingssysteem en wordt ook niet ondersteund in Linux. 

Windows Defender is de ingebouwde Antimalware ingeschakeld in Windows Server 2016. De Windows Defender Interface is standaard ook ingeschakeld op sommige Windows Server 2016 SKU's.
De Azure VM Antimalware-extensie kan nog steeds worden toegevoegd aan een Windows Server 2016 Azure VM met Windows Defender, maar in dit scenario past de extensie optionele configuratiebeleidsregels toe die door Windows Defender moeten worden gebruikt, de extensie implementeert geen extra antimalwareservice. U meer lezen over deze update [hier](https://blogs.msdn.microsoft.com/azuresecurity/2017/03/07/update-to-azure-antimalware-extension-for-cloud-services/).

### <a name="internet-connectivity"></a>Internetconnectiviteit

De Microsoft Antimalware voor Windows vereist dat de beoogde virtuele machine is aangesloten op het internet om regelmatige motor- en handtekeningupdates te ontvangen. 

## <a name="template-deployment"></a>Sjabloonimplementatie
Azure VM-extensies kunnen worden geïmplementeerd met Azure Resource Manager-sjablonen. Sjablonen zijn ideaal bij het implementeren van een of meer virtuele machines waarvoor een configuratie na implementatie vereist is, zoals onboarding naar Azure Antimalware.

De JSON-configuratie voor een virtuele machine-extensie kan worden genest in de bron van de virtuele machine of op het hoofd- of hoogste niveau van een JSON-sjabloon voor Resource Manager worden geplaatst. De plaatsing van de JSON-configuratie is van invloed op de waarde van de resourcenaam en -type. Zie [Naam en type voor onderliggende bronnen instellen voor](../../azure-resource-manager/templates/child-resource-name-type.md)meer informatie . 

In het volgende voorbeeld wordt ervan uitgegaan dat de VM-extensie is genest in de bron van de virtuele machine. Bij het nesten van de extensiebron wordt `"resources": []` de JSON in het object van de virtuele machine geplaatst.

```json
{
      "type": "Microsoft.Compute/virtualMachines/extensions",
      "name": "[concat(parameters('vmName'),'/', parameters('vmExtensionName'))]",
      "apiVersion": "2019-07-01",
      "location": "[resourceGroup().location]",
      "dependsOn": [
        "[concat('Microsoft.Compute/virtualMachines/', parameters('vmName'))]"
      ],

      "properties": {
        "publisher": "Microsoft.Azure.Security",
        "type": "IaaSAntimalware",
        "typeHandlerVersion": "1.3",
        "autoUpgradeMinorVersion": true,
        "settings": {
          "AntimalwareEnabled": "true",
          "Exclusions": {
            "Extensions": ".log;.ldf",
            "Paths": "D:\\IISlogs;D:\\DatabaseLogs",
            "Processes": "mssence.svc"
          },

          "RealtimeProtectionEnabled": "true",
          "ScheduledScanSettings": {
            "isEnabled": "true",
            "scanType": "Quick",
            "day": "7",
            "time": "120"
          }
        },
        "protectedSettings": null
      }
}
```

## <a name="powershell-deployment"></a>PowerShell-implementatie
Afhankelijk van uw type implementatie gebruikt u de bijbehorende opdrachten om de azure antimalware-extensie voor virtuele machines te implementeren op een bestaande virtuele machine.

  * Azure Resource Manager op basis van Virtual Machine-https://blogs.msdn.microsoft.com/azuresecurity/2016/02/24/update-on-microsoft-antimalware-and-azure-resource-manager-arm-vms/
  * Clusters van Azure-servicefabricen -https://blogs.msdn.microsoft.com/azuresecurity/2016/10/07/add-microsoft-antimalware-to-azure-service-fabric-clusters/
  * Klassieke cloudservice -https://docs.microsoft.com/powershell/module/servicemanagement/azure/set-azureserviceantimalwareextension

## <a name="troubleshoot-and-support"></a>Problemen oplossen en ondersteuning

### <a name="troubleshoot"></a>Problemen oplossen

Microsoft Antimalware-extensielogboeken zijn beschikbaar op - %Systemdrive%\WindowsAzure\Logs\Plugins\Microsoft.Azure.Security.IaaSAntimalware(of PaaSAntimalware)\1.5.5.x(versie#)\CommandExecution.log

### <a name="error-codes-and-their-meanings"></a>Foutcodes en hun betekenissen

| Foutcode | Betekenis | Mogelijke actie |
| :---: | --- | --- |
| -2147156224 | MSI is bezig met andere installatie | Probeer de installatie laatste uit te voeren |
| -2147156221 | MSE-installatie al actief | Slechts één instantie tegelijk uitvoeren |
| -2147156208 | Weinig schijfruimte < 200 MB | Ongebruikte bestanden verwijderen en installatie opnieuw proberen |
| -2147156187 | Laatst installatie, upgrade, update of verwijderen aangevraagde reboot | Installatie opnieuw opstarten en opnieuw proberen |
| -2147156121 | Setup geprobeerd om concurrent product te verwijderen. Maar concurrent product verwijderen mislukt | Probeer het product van de concurrent handmatig te verwijderen, opnieuw op te starten en de installatie opnieuw te proberen  |
| -2147156116 | Validatie van beleidsbestand is mislukt | Zorg ervoor dat u een geldig XML-bestand met een geldig beleid doorgeeft aan de installatie  |
| -2147156095 | Setup kon de Antimalware-service niet starten | Controleer of alle binaire bestanden correct zijn ondertekend en dat het juiste licentiebestand is geïnstalleerd |
| -2147023293 | Een fatale fout deed zich voor tijdens de installatie. In de meeste gevallen wel. Epp.msi, kan niet registreren\start\stop AM-service of minifilterstuurprogramma | MSI logs van EPP.msi zijn hier nodig voor toekomstig onderzoek |
| -2147023277 | Installatiepakket kan niet worden geopend | Controleer of het pakket bestaat en toegankelijk is, of neem contact op met de leverancier van de toepassing om te controleren of dit een geldig Windows Installer-pakket is |
| -2147156109 | Verdediger is vereist als een voorwaarde |  |
| -2147205073 | De websso-uitgever wordt niet ondersteund | |
| -2147024893 | Het systeem kan het opgegeven pad niet vinden |  |
| -2146885619 | Geen cryptografisch bericht of het cryptografische bericht is niet correct opgemaakt |  |
| -1073741819 | De instructie op 0x%p verwezen geheugen op 0x%p. Het geheugen kan niet %s |  |
| 1 | Onjuiste functie |  |


### <a name="support"></a>Ondersteuning

Als u op enig moment in dit artikel meer hulp nodig hebt, u contact opnemen met de Azure-experts op de [FORUMS VOOR MSDN Azure en Stack Overflow.](https://azure.microsoft.com/support/forums/) U ook een Azure-ondersteuningsincident indienen. Ga naar de [Azure-ondersteuningssite](https://azure.microsoft.com/support/options/)en selecteer Ondersteuning krijgen. Lees de veelgestelde vragen over [Microsoft Azure-ondersteuning](https://azure.microsoft.com/support/faq/)voor informatie over het gebruik van Azure Support.
